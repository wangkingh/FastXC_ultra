; ========================  SeisArrays Cross-Correlation Configuration  =========================
; 版本：2025-05-02
; 1. 节顺序 ≈ 实际处理流程，便于阅读和维护。
; 2. 若仅用单阵列，把 [array2].sac_dir 设为 NONE。
; ===============================================================================================


;--------------------------------------------------------------------------------
; 1. 数据源（Array-1）
;--------------------------------------------------------------------------------
[array1]
sac_dir = ./
pattern = {home}/{*}/{*}/{station}.{YYYY}.{JJJ}.{*}.{component}.{suffix}
time_start = 2017-09-01 00:00:00
time_end = 2017-09-30 01:00:00
time_list = NONE
sta_list = NONE
# 三分量请严格按 ENZ 顺序填写；
component_list = E,N,Z 

;--------------------------------------------------------------------------------
; 2. 数据源（Array-2，可选）
;--------------------------------------------------------------------------------
[array2]
sac_dir = NONE
pattern = {home}/{YYYY}/{station}_{component}_{JJJ}.{suffix}
time_start = 2017-09-01 00:00:00
time_end = 2017-09-30 01:00:00
time_list = NONE
sta_list = NONE
component_list = Z


;--------------------------------------------------------------------------------
; 3. 预处理 & 片段生成
;--------------------------------------------------------------------------------
[preprocess]
win_len = 3600
shift_len = 3600
delta = 0.1
normalize = RUN-ABS-MF
bands = 0.1/0.5 0.5/1 1/2 
whiten = BEFORE
# 连续片段跳步：-1 = 不跳；多个索引请用逗号分隔（从 0 开始）
# 例如 skip_step = 0,2,5   ⇒ 跳过第 0、2、5 个片段
skip_step = -1


;--------------------------------------------------------------------------------
; 4. 互相关
;--------------------------------------------------------------------------------
[xcorr]
max_lag = 100
write_mode = APPEND
write_segment = False
distance_range = -1/50000
azimuth_range = -1/360 
source_info_file = NONE


;--------------------------------------------------------------------------------
; 5. 叠加
;--------------------------------------------------------------------------------
[stack]
stack_flag = 100
sub_stack_size = 1
source_info_file = NONE 


;--------------------------------------------------------------------------------
; 6. 可执行文件
;--------------------------------------------------------------------------------
[executables]
sac2spec = /storage/HOME/yaolab/jxwang/FastXC_ultra/bin/sac2spec_ultra
xc = /storage/HOME/yaolab/jxwang/FastXC_ultra/bin/xc_multi_channel
stack = /storage/HOME/yaolab/jxwang/FastXC_ultra/bin/ncf_pws
rotate = /storage/HOME/yaolab/jxwang/FastXC_ultra/bin/RotateNCF


;--------------------------------------------------------------------------------
; 7. 设备
;--------------------------------------------------------------------------------
[device]
gpu_list = 0,1,2,3
gpu_task_num = 1,1,1,1
gpu_mem_info = 40,40,40,40
cpu_count = 100


;--------------------------------------------------------------------------------
; 8. 存储
;--------------------------------------------------------------------------------
[storage]
output_dir = ./
overwrite = True
clean_ncf = True


;--------------------------------------------------------------------------------
; 9. 调试
;--------------------------------------------------------------------------------
[debug]
dry_run = False
log_file_path = NONE